<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.paintee.common.repository.helper.PersonalHelper">
	<resultMap id="BaseResultMap" type="com.paintee.common.repository.entity.vo.PersonalVO" extends="com.paintee.common.repository.mapper.PaintingMapper.BaseResultMap">
<!-- 	    <result column="artist_name" property="artistName" /> -->
	</resultMap>
  	
	<!-- 특정 개인 작가가 업로드한 그림의 목록을 가져오기 -->
  	<select id="selectPersonalPaintingList" resultMap="BaseResultMap">
		select a.artist_id, 
			   (select name from tb_user where user_id = a.artist_id) artist_name, 
			   a.sentence, 
			   a.file_group_seq, 
			   a.upload_date, 
			   a.painting_id, 
			   a.posted_num, 
			   a.posted_people_cnt
		  from tb_painting a
		 where a.artist_id = (select user_id from tb_user where name = #{artistName})
		 order by upload_date desc
		 limit #{startRow}, #{rowPerPage}
  	</select>  	
  	
	<!-- 그림 작가가 업로드한 그림 카운트 -->
  	<select id="selectPersonalPaintingCount" resultType="int">
  	    select count(*)
  	      from tb_painting 
  	     where artist_id = (select user_id from tb_user where name = #{artistName})
  	</select>    	
</mapper>





